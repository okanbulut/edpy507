---
title: "Classical Test Theory (CTT)"
output:
  bookdown::html_document2:
    toc: TRUE
bibliography: mybib.bib
csl: apa.csl
---

```{r setup, include = FALSE}
#Setup knitr
knitr::opts_chunk$set(echo = TRUE, eval = TRUE, warning = FALSE, background = "gray85",
                      message = FALSE, fig.width=8, fig.height=6, comment = NA,
                      fig.align = 'center')

suppressWarnings({
  # Add all the packages you will use in the article here
  library("rmarkdown")
  library("fontawesome")
  library("kableExtra")
  library("emo")
})

# automatically create a bib database for R packages
knitr::write_bib(x = c(.packages(), "ggplot2"), file = "packages.bib")
```

***

# Example 1: The Need for Cognition Scale

**Need for cognition**, or shortly NFC, is a psychological latent trait defined as the desire to engage in cognitively challenging tasks and effortful thinking [@nfc-cacioppo]. Individuals with high levels of NFC tend to seek, acquire, think about, and reflect on information, whereas individuals with low levels of NFC tend to avoid detailed information about the world and find cognitively complex tasks stressful [@nfc-cacioppo; @nfc-chiesi]. To measure the latent trait of NFC, Cacioppo and Petty developed the [Need for Cognition Scale](https://centerofinquiry.org/uncategorized/need-for-cognition-scale-wabash-national-study/) [@nfc-cacioppo]. The original scale consists of 34 items that ask individuals to rate the extent to which they agree with statements about the satisfaction they gain from thinking (e.g., The notion of thinking abstractly is appealing to me). @nfc-short also created a shorter form of the scale with 18 items from the original scale (called NFC-18).

\  

Although the NFC Scale is already a well-established tool, we will use it to conduct various psychometric analyses based on Classical Test Theory (CTT) and demonstrate how to collect evidence supporting the reliability and validity of this instrument. The data for our demonstration come from a relatively recent study: "[Thinking in action: Need for Cognition predicts Self-Control together with Action Orientation](https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0220282)" [@nfc-grass], focusing on the relationship between NFC and other latent traits (e.g., self-control). To measure NFC, the authors used the German version of the Need for Cognition Scale with 16 items [@nfc-bless]. @nfc-grass kindly shared their data files and other materials in an open repository: <https://osf.io/wn8xm/>. For the following analyses, we will use a subset of the original data including responses to the NFC Scale, demographic variables, and additional data related self-control etc. This dataset can be downloaded from [**here**]().

<br>

## Setting up R

To conduct CTT-based analyses, we will use the following R packages:

```{r ctt0, eval=TRUE, echo=FALSE}
pkg_dat <- data.frame(
  Package = c("dplyr", "DataExplorer", "ggcorrplot",
              "psych", "CTT", "ShinyItemAnalysis", "QME",
              "devtools", "rmarkdown"),
  URL = c("http://CRAN.R-project.org/package=dplyr", 
          "http://CRAN.R-project.org/package=DataExplorer",
          "http://CRAN.R-project.org/package=ggcorrplot",
          "http://CRAN.R-project.org/package=psych",
          "http://CRAN.R-project.org/package=CTT",
          "http://CRAN.R-project.org/package=ShinyItemAnalysis",
          "https://github.com/zief0002/QME", 
          "http://CRAN.R-project.org/package=devtools",
          "http://CRAN.R-project.org/package=rmarkdown")
)

kbl(pkg_dat, caption = "") %>%
  kable_paper("striped") %>%
  pack_rows("Exploratory Data Analysis", 1, 3) %>%
  pack_rows("Psychometric Analysis", 4, 7) %>%
  pack_rows("Ancillary Packages", 8, 9)
```

\  

We can install all of these packages by using the `install.packages()` command. Please note that you need to install these packages <u>only once</u>.  

```{r ctt1, eval=FALSE}
# Install all the packages together
install.packages(c("CTT", "psych", "ShinyItemAnalysis"))

# Or, you can do it one by one, such as:
install.packages("CTT")
install.packages("psych")
install.packages("ShinyItemAnalysis")
```

After you install the packages properly (i.e., no error messages on your R console), you can use the `library()` command to activate these packages in your R session. 

```{r ctt2, eval=FALSE}
# Activate the packages
library("CTT")
library("psych")
library("ShinyItemAnalysis")
```

Each of these packages comes with several functions. Once you activate a package, you can start using all the functions loaded with that package. To call a particular function from a package, we need to know the function name. For example, we can use the `alpha()` function in the **psych** package to calculate internal consistency values such as coefficient alpha. Since we are going to use multiple functions from different packages, it might be a bit difficult to remember which package each function belongs to. Therefore, I will use the following format in my codes: `packagename::function`. For example, `psych::alpha()` indicates that I am calling the `alpha()` function from the **psych** package.

***

> <span style="color:blue">**NOTE:**</span> Using `::` also has two more benefits. First, we can call a particular function from a package without activating the entire package. For example, `psych::alpha()` allows us to use the `alpha()` function without running `library("psych")`. Second, if two or more packages activated within an R session include a function with the same name, then R only gives us access the function from the most recently activated package. This is called "masking". However, by using `::`, we can still use the functions from the masked packages.   

***

<br>

## Exploratory data analysis

xxx

<br>

## Item analysis based on CTT

xxx

<br>

## Criterion-related validity

xxx

***

# Example 2: A Multiple-Choice Exam

xxx

<br>

# References
